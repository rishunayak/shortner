{
    "openapi": "3.0.0",
    "info": {
      "title": "Custom URL Shortener API",
      "version": "1.0.0",
      "description": "API for user authentication and URL shortening."
    },
    "servers": [
      {
        "url": "http://localhost:5001/api",
        "description": "Local"
      }
    ],
    "paths": {
      "/auth/google": {
        "post": {
          "summary": "Authenticate user with Google Sign-In",
          "description": "Verifies the Google ID token and creates a user session.",
          "tags": ["Authentication"],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "idToken": {
                      "type": "string",
                      "description": "Google ID token obtained from client-side authentication."
                    }
                  },
                  "required": ["idToken"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "User authenticated successfully.",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "token": {
                        "type": "string",
                        "description": "JWT token for session authentication."
                      },
                      "user": {
                        "type": "object",
                        "properties": {
                          "_id": { "type": "string" },
                          "googleId": { "type": "string" },
                          "email": { "type": "string" },
                          "name": { "type": "string" },
                          "profilePicture": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Bad request - Missing ID token."
            },
            "500": {
              "description": "Internal server error - Authentication failed."
            }
          }
        }
      },
      "/shorten": {
        "post": {
          "summary": "Create a new short URL",
          "description": "Generates a short URL for a provided long URL. Optionally, a custom alias and topic can be provided. The short URL is associated with the authenticated user.",
          "tags": ["URL Shortening"],
          "security": [
            {
              "bearerAuth": []
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "longUrl": {
                      "type": "string",
                      "description": "The original long URL that needs to be shortened."
                    },
                    "customAlias": {
                      "type": "string",
                      "description": "An optional custom alias for the short URL."
                    },
                    "topic": {
                      "type": "string",
                      "description": "An optional topic/category to group the URL."
                    }
                  },
                  "required": ["longUrl"]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Short URL successfully created.",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "shortUrl": {
                        "type": "string",
                        "description": "The newly created short URL."
                      },
                      "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp of when the short URL was created."
                      }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Bad request - Invalid or missing parameters."
            },
            "401": {
              "description": "Unauthorized - Missing or invalid JWT token."
            },
            "500": {
              "description": "Internal server error - URL shortening failed."
            }
          }
        }
      },
      "/shorten/{customAlias}": {
        "get": {
          "summary": "Redirect to the original URL",
          "description": "Redirects the user to the original URL associated with the custom alias.",
          "tags": ["URL Shortening"],
          "parameters": [
            {
              "name": "customAlias",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string"
              },
              "description": "The custom alias of the shortened URL."
            }
          ],
          "responses": {
            "302": {
              "description": "Successfully redirected to the original URL."
            },
            "404": {
              "description": "URL does not exist for the given custom alias."
            },
            "500": {
              "description": "Internal server error - Redirection failed."
            }
          }
        }
      }
    },
    "components": {
      "securitySchemes": {
        "bearerAuth": {
          "type": "http",
          "scheme": "bearer",
          "bearerFormat": "JWT",
          "description": "Use the JWT token obtained from Google authentication to access protected endpoints."
        }
      }
    }
  }
  